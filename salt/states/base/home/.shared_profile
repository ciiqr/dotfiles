#!/usr/bin/env bash

export PATH="${HOME}/.local/bin:${PATH}"

export DOTFILES_HOSTNAME="$(~/.scripts/system.sh get-hostname)"
export DOTFILES_PLATFORM="$(~/.scripts/system.sh get-platform)"
# TODO: export DOTFILES_OS

# lua
if command-exists luarocks; then
    eval "$(luarocks path)"
fi

# ruby
if command-exists ruby && command-exists gem; then
    export PATH="$(ruby -r rubygems -e 'puts Gem.user_dir')/bin:${PATH}"
fi

# python
if [[ -d "${HOME}/.pyenv" ]]; then
    export PYENV_ROOT="${HOME}/.pyenv"
    export PATH="${PYENV_ROOT}/bin:${PATH}"
fi
if command-exists pyenv; then
    eval "$(pyenv init --path)"
fi

# flutter
if [[ -d "${HOME}/.pub-cache/bin" ]]; then
    export PATH="${PATH}:${HOME}/.pub-cache/bin"
fi

# nvm
if [[ -d "${HOME}/.nvm" ]]; then
    export NVM_DIR="${HOME}/.nvm"
    . source-if-exists "${NVM_DIR}/nvm.sh"
fi

# google-chrome
if command-exists google-chrome-stable; then
    export CHROME_EXECUTABLE='google-chrome-stable'
elif command-exists chromium; then
    export CHROME_EXECUTABLE='chromium'
fi

# nix
. source-if-exists ~/.nix-profile/etc/profile.d/nix.sh

. source-all-from ~/.shared_profile.d
